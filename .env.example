## Environment Variables
### Backend Configuration
# App settings
DEBUG=False
USE_GPU=False  # Set to True if using GPU provider
GPU_DEVICE=0

# YOLO settings
YOLO_MODEL=yolov8m  # Options: yolov8n, yolov8s, yolov8m, yolov8l, yolov8x
YOLO_CONFIDENCE=0.45

# Neural Style Transfer
NST_MODEL_TYPE=onnx  # Options: onnx, pytorch

# Image settings
MAX_IMAGE_SIZE=50  # MB
SUPPORTED_FORMATS=jpg,jpeg,png,webp

# Google Cloud Storage (optional)
USE_GCS=False
GCS_PROJECT_ID=your-project-id
GCS_BUCKET=creative-studio-bucket
GCS_CREDENTIALS_PATH=/path/to/credentials.json

# Local storage
LOCAL_UPLOAD_DIR=./uploads
LOCAL_RESULTS_DIR=./results
LOCAL_MODELS_DIR=./models

# API
API_HOST=0.0.0.0
API_PORT=8000
```

### Frontend Configuration
API_URL=http://localhost:8000

## GPU Provider Setup

### Option 1: Vast.ai (Recommended for Development)

1. **Create Account**: https://www.vast.ai/
2. **Create Instance**: 
   - Choose GPU: NVIDIA RTX 4090, A100, or A6000
   - Select "Secure Cloud" or "Community Cloud"
   - Choose Ubuntu 22.04 image
3. **SSH into Instance**:
   ```bash
   ssh root@<instance-ip>
   ```
4. **Install Dependencies**:
   ```bash
   sudo apt update && sudo apt install -y python3-pip python3-dev
   pip install --upgrade pip
   ```
5. **Clone & Setup**:
   ```bash
   git clone <your-repo>
   cd CreativeStudio
   pip install -r requirements.txt
   ```
6. **Run Backend**:
   ```bash
   export USE_GPU=True
   cd backend
   python main.py
   ```

### Option 2: RunPod (For Production)

1. **Create Account**: https://www.runpod.io/
2. **Start Pod**:
   - Select GPU (RTX 4090, A100 recommended)
   - Select PyTorch template
   - Configure: 25GB+ storage
3. **Set Environment Variables**:
   ```bash
   export USE_GPU=True
   export CUDA_VISIBLE_DEVICES=0
   ```
4. **Deploy Application** (same steps as Vast.ai)

### Option 3: Google Colab (Free GPU)

```python
# Mount Google Drive
from google.colab import drive
drive.mount('/content/drive')

# Install dependencies
!pip install -r requirements.txt

# Run backend with ngrok for tunneling
!pip install pyngrok
from pyngrok import ngrok
public_url = ngrok.connect(8000)
print(f"Public URL: {public_url}")

# Start API
!cd backend && python main.py
```

## Local Development Setup

### 1. Create Virtual Environment
```bash
python3.11 -m venv venv
source venv\Scripts\activate  # On macOS: venv/bin/activate 
```

### 2. Install Dependencies
pip install -r requirements.txt


### 3. Create .env File
cp .env.example .env
# Edit .env with your configuration


### 4. Run Backend
cd backend
python main.py  
# or pymon main.py for auto-reload


### 5. Run Frontend (in new terminal)
streamlit run frontend/src/app.py


## Google Cloud Storage Setup (Optional)

### 1. Create GCS Bucket
```bash
gsutil mb gs://creative-studio-bucket
```

### 2. Create Service Account
```bash
# Go to Google Cloud Console
# Create service account with Storage Admin role
# Download JSON key file
```

### 3. Set Environment Variable
```bash
export GCS_CREDENTIALS_PATH=/path/to/service-account-key.json
export USE_GCS=True
```

## Docker Deployment

### Build Images
```bash
docker-compose build
```

### Run Containers
```bash
docker-compose up
```

### With GPU Support (RunPod/Vast.ai)
```bash
docker-compose -f docker-compose.gpu.yml up
```

## Performance Tips

1. **Model Optimization**:
   - Use `yolov8n` for faster inference (smaller model)
   - Use `yolov8m` for balanced performance
   - Use `yolov8l` or `yolov8x` for higher accuracy

2. **GPU Optimization**:
   - Enable mixed precision: `torch.cuda.amp`
   - Use `torch.jit` for model compilation
   - Batch process multiple images

3. **Image Optimization**:
   - Compress images before upload
   - Resize large images (max 2048x2048)
   - Use JPEG for faster I/O

## Troubleshooting

### CUDA Out of Memory
```bash
# Use smaller model
export YOLO_MODEL=yolov8n

# Clear cache
rm -rf ~/.cache/torch
```

### Slow Style Transfer
- Reduce image size
- Use smaller GPU model
- Increase style strength (less computation)

### GCS Authentication Error
```bash
# Verify credentials file
cat $GCS_CREDENTIALS_PATH

# Test GCS access
gsutil ls gs://creative-studio-bucket
```
